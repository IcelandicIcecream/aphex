import"../chunks/DsnmJJEf.js";import{X as Kt,L as Qt,Y as Vt,N as Wt,b1 as Zt,i as pt,a as M,b as d,k as te,p as ee,f as b,l as ae,t as F,c as re,$ as oe,d as r,s as o,r as a,g as l,h as G,v as Pt,e as g,n as q,m as Y}from"../chunks/DWBROaph.js";import{s as ot}from"../chunks/zhm3sqsy.js";import{l as mt,s as ft,i as D}from"../chunks/CrQaW3DA.js";import{I as _t,s as gt,e as se,T as ie}from"../chunks/CgH_2WnA.js";import{s as kt,r as st,b as it}from"../chunks/CMwlA4jW.js";import{i as ne,a as le,c as de,d as ce}from"../chunks/CrOXdnIQ.js";import{B as nt,e as ut,C as At,a as Lt,d as Ct,I as Et}from"../chunks/CQxSK_kJ.js";import{T as Nt}from"../chunks/AHJMyVxs.js";import{r as It}from"../chunks/BegLjn8u.js";import{P as St}from"../chunks/C4tAP6mY.js";import{L as ue}from"../chunks/BVXJ_ZUV.js";import"../chunks/D8BKmG1w.js";function lt(s,t,m){Kt(()=>{var v=Qt(()=>t(s,m?.())||{});if(m&&v?.update){var i=!1,_={};Vt(()=>{var n=m();Wt(n),i&&Zt(_,n)&&(_=n,v.update(n))}),i=!0}if(v?.destroy)return()=>v.destroy()})}function ve(s,t){const m=mt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const v=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];_t(s,ft({name:"circle-check"},()=>m,{get iconNode(){return v},children:(i,_)=>{var n=pt(),f=M(n);gt(f,t,"default",{}),d(i,n)},$$slots:{default:!0}}))}function pe(s,t){const m=mt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const v=[["circle",{cx:"12",cy:"12",r:"10"}]];_t(s,ft({name:"circle"},()=>m,{get iconNode(){return v},children:(i,_)=>{var n=pt(),f=M(n);gt(f,t,"default",{}),d(i,n)},$$slots:{default:!0}}))}function me(s,t){const m=mt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const v=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];_t(s,ft({name:"pencil"},()=>m,{get iconNode(){return v},children:(i,_)=>{var n=pt(),f=M(n);gt(f,t,"default",{}),d(i,n)},$$slots:{default:!0}}))}function fe(s){const t=JSON.parse(s);return t.data&&(t.data=de(t.data,ce.decoders)),t}function vt(s){return HTMLElement.prototype.cloneNode.call(s)}function dt(s,t=()=>{}){const m=async({action:i,result:_,reset:n=!0,invalidateAll:f=!0})=>{_.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(s),f&&await ne()),(location.origin+location.pathname===i.origin+i.pathname||_.type==="redirect"||_.type==="error")&&await le(_)};async function v(i){if((i.submitter?.hasAttribute("formmethod")?i.submitter.formMethod:vt(s).method)!=="post")return;i.preventDefault();const n=new URL(i.submitter?.hasAttribute("formaction")?i.submitter.formAction:vt(s).action),f=i.submitter?.hasAttribute("formenctype")?i.submitter.formEnctype:vt(s).enctype,E=new FormData(s),W=i.submitter?.getAttribute("name");W&&E.append(W,i.submitter?.getAttribute("value")??"");const J=new AbortController;let X=!1;const tt=await t({action:n,cancel:()=>X=!0,controller:J,formData:E,formElement:s,submitter:i.submitter})??m;if(X)return;let S;try{const N=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&N.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const et=f==="multipart/form-data"?E:new URLSearchParams(E),B=await fetch(n,{method:"POST",headers:N,cache:"no-store",body:et,signal:J.signal});S=fe(await B.text()),S.type==="error"&&(S.status=B.status)}catch(N){if(N?.name==="AbortError")return;S={type:"error",error:N}}await tt({action:n,formData:E,formElement:s,update:N=>m({action:n,result:S,reset:N?.reset,invalidateAll:N?.invalidateAll}),result:S})}return HTMLFormElement.prototype.addEventListener.call(s,"submit",v),{destroy(){HTMLFormElement.prototype.removeEventListener.call(s,"submit",v)}}}var _e=b('<meta name="description" content="A simple todo app built with Aphex CMS"/>'),ge=b('<span class="ml-2 text-sm text-green-600"> </span>'),be=(s,t)=>g(t,!l(t)),he=b('<button type="button" class="ring-offset-background focus-visible:ring-ring bg-primary text-primary-foreground hover:bg-primary/90 inline-flex h-10 items-center justify-center gap-2 whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"><!> </button>'),xe=b('<form method="POST" action="?/createTodo" class="space-y-4"><div><!></div> <div><!></div> <!></form>'),ye=b("<!> <!>",1),$e=(s,t)=>g(t,!0),we=b('<p class="text-muted-foreground mb-4 text-sm">Get started by adding your first todo item</p> <button type="button" class="ring-offset-background focus-visible:ring-ring border-input bg-background hover:bg-accent hover:text-accent-foreground inline-flex h-10 items-center justify-center gap-2 whitespace-nowrap rounded-md border px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"><!> Create Todo</button>',1),Te=b('<p class="text-muted-foreground mb-4 text-sm">Please log in to create and manage your todos</p> <!>',1),Pe=b('<!> <h3 class="mb-2 text-lg font-semibold">No todos yet</h3> <!>',1),ke=b('<form method="POST" action="?/updateTodo" class="space-y-3"><input type="hidden" name="id"/> <!> <!> <div class="flex gap-2"><!> <button type="button" class="ring-offset-background focus-visible:ring-ring border-input bg-background hover:bg-accent hover:text-accent-foreground inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md border px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50">Cancel</button></div></form>'),Ae=b('<p class="text-muted-foreground mt-2 text-sm"> </p>'),Le=b("<!> <!>",1),Ce=(s,t,m)=>t(l(m)),Ee=b('<div class="flex gap-2"><button type="button" class="text-muted-foreground hover:text-primary cursor-pointer transition-colors" title="Edit todo"><!></button> <form method="POST" action="?/deleteTodo"><input type="hidden" name="id"/> <button type="submit" class="text-muted-foreground hover:text-destructive cursor-pointer transition-colors" title="Delete todo"><!></button></form></div>'),Ne=b('<div class="flex items-start gap-4"><form method="POST" action="?/toggleComplete"><input type="hidden" name="id"/> <input type="hidden" name="completed"/> <button type="submit" class="cursor-pointer"><!></button></form> <div class="flex-1"><!></div> <!></div>'),Ie=b('<div class="space-y-4"></div>'),Se=b('<div class="from-primary/10 via-primary/5 to-primary/10 border-b bg-gradient-to-r"><div class="container mx-auto max-w-4xl px-6 py-3"><div class="flex items-center justify-between text-sm"><div class="flex items-center gap-2"><span class="font-semibold">⚡ Powered by Aphex Local API</span> <span class="text-muted-foreground">• Full CRUD operations • Multi-tenant • Type-safe</span></div> <a class="text-primary font-medium hover:underline">Admin Panel →</a></div></div></div> <div class="container mx-auto max-w-4xl p-6"><div class="mb-8"><div class="flex items-center justify-between"><div><h1 class="text-4xl font-bold">Todo App</h1> <p class="text-muted-foreground mt-2">Manage your tasks with Aphex CMS <!></p></div> <div class="flex gap-2"><!></div></div></div> <!> <!> <div class="text-muted-foreground mt-8 text-center text-sm"><p>You can also manage your todos in the <a class="font-medium underline">admin panel</a></p></div></div>',1);function Je(s,t){ee(t,!0);let m=Pt(()=>t.data.todos||[]),v=G(!1),i=G(""),_=G(""),n=G(null),f=G(""),E=G("");function W(e){g(n,e.id,!0),g(f,e.title,!0),g(E,e.description||"",!0)}function J(){g(n,null),g(f,""),g(E,"")}var X=Se();ae(e=>{var c=_e();oe.title="Todo App - Aphex Base Template",d(e,c)});var Z=M(X),tt=r(Z),S=r(tt),N=o(r(S),2);a(S),a(tt),a(Z);var et=o(Z,2),B=r(et),bt=r(B),ct=r(bt),ht=o(r(ct),2),Dt=o(r(ht));{var Mt=e=>{var c=ge(),P=r(c);a(c),F(()=>ot(P,`• Logged in as ${t.data.userName??""}`)),d(e,c)};D(Dt,e=>{t.data.isLoggedIn&&e(Mt)})}a(ht),a(ct);var xt=o(ct,2),jt=r(xt);{var zt=e=>{var c=he();c.__click=[be,v];var P=r(c);St(P,{class:"h-4 w-4"});var u=o(P);a(c),F(()=>ot(u,` ${l(v)?"Cancel":"Add Todo"}`)),d(e,c)},Ot=e=>{nt(e,{href:"/login",variant:"outline",children:(c,P)=>{q();var u=Y("Login");d(c,u)},$$slots:{default:!0}})};D(jt,e=>{t.data.isLoggedIn?e(zt):e(Ot,!1)})}a(xt),a(bt),a(B);var yt=o(B,2);{var Ft=e=>{ut(e,{class:"mb-6",children:(c,P)=>{var u=ye(),K=M(u);At(K,{children:(j,at)=>{Lt(j,{children:($,k)=>{q();var h=Y("Create New Todo");d($,h)},$$slots:{default:!0}})},$$slots:{default:!0}});var Q=o(K,2);Ct(Q,{children:(j,at)=>{var $=xe(),k=r($),h=r(k);Et(h,{type:"text",name:"title",placeholder:"Todo title",required:!0,get value(){return l(i)},set value(w){g(i,w,!0)}}),a(k);var y=o(k,2),I=r(y);Nt(I,{name:"description",placeholder:"Description (optional)",rows:3,get value(){return l(_)},set value(w){g(_,w,!0)}}),a(y);var H=o(y,2);nt(H,{type:"submit",class:"w-full",children:(w,z)=>{q();var V=Y("Create Todo");d(w,V)},$$slots:{default:!0}}),a($),lt($,(w,z)=>dt?.(w,z),()=>()=>async({result:w,update:z})=>{w.type==="success"&&(g(i,""),g(_,""),g(v,!1)),await z()}),d(j,$)},$$slots:{default:!0}}),d(c,u)},$$slots:{default:!0}})};D(yt,e=>{t.data.isLoggedIn&&l(v)&&e(Ft)})}var $t=o(yt,2);{var Ht=e=>{ut(e,{children:(c,P)=>{Ct(c,{class:"flex flex-col items-center justify-center py-12",children:(u,K)=>{var Q=Pe(),j=M(Q);ue(j,{class:"text-muted-foreground mb-4 h-12 w-12"});var at=o(j,4);{var $=h=>{var y=we(),I=o(M(y),2);I.__click=[$e,v];var H=r(I);St(H,{class:"mr-2 h-4 w-4"}),q(),a(I),d(h,y)},k=h=>{var y=Te(),I=o(M(y),2);nt(I,{href:"/login",variant:"outline",children:(H,w)=>{q();var z=Y("Login to Get Started");d(H,z)},$$slots:{default:!0}}),d(h,y)};D(at,h=>{t.data.isLoggedIn?h($):h(k,!1)})}d(u,Q)},$$slots:{default:!0}})},$$slots:{default:!0}})},qt=e=>{var c=Ie();se(c,21,()=>l(m),P=>P.id,(P,u)=>{ut(P,{children:(K,Q)=>{At(K,{children:(j,at)=>{var $=Ne(),k=r($),h=r(k);st(h);var y=o(h,2);st(y);var I=o(y,2),H=r(I);{var w=p=>{ve(p,{class:"mt-1 h-5 w-5 text-green-500 transition-colors hover:text-green-600"})},z=p=>{pe(p,{class:"text-muted-foreground hover:text-primary mt-1 h-5 w-5 transition-colors"})};D(H,p=>{l(u).completed?p(w):p(z,!1)})}a(I),a(k),lt(k,p=>dt?.(p));var V=o(k,2),Rt=r(V);{var Ut=p=>{var A=ke(),L=r(A);st(L);var R=o(L,2);Et(R,{type:"text",name:"title",placeholder:"Title",required:!0,get value(){return l(f)},set value(x){g(f,x,!0)}});var O=o(R,2);Nt(O,{name:"description",placeholder:"Description (optional)",rows:2,get value(){return l(E)},set value(x){g(E,x,!0)}});var T=o(O,2),C=r(T);nt(C,{type:"submit",size:"sm",children:(x,rt)=>{q();var Xt=Y("Save");d(x,Xt)},$$slots:{default:!0}});var U=o(C,2);U.__click=J,a(T),a(A),lt(A,(x,rt)=>dt?.(x,rt),()=>()=>async({result:x,update:rt})=>{x.type==="success"&&J(),await rt()}),F(()=>it(L,l(u).id)),d(p,A)},Gt=p=>{var A=Le(),L=M(A);{let T=Pt(()=>l(u).completed?"line-through opacity-60":"");Lt(L,{get class(){return l(T)},children:(C,U)=>{q();var x=Y();F(()=>ot(x,l(u).title)),d(C,x)},$$slots:{default:!0}})}var R=o(L,2);{var O=T=>{var C=Ae(),U=r(C,!0);a(C),F(()=>ot(U,l(u).description)),d(T,C)};D(R,T=>{l(u).description&&T(O)})}d(p,A)};D(Rt,p=>{l(n)===l(u).id?p(Ut):p(Gt,!1)})}a(V);var Yt=o(V,2);{var Jt=p=>{var A=Ee(),L=r(A);L.__click=[Ce,W,u];var R=r(L);me(R,{class:"h-4 w-4"}),a(L);var O=o(L,2),T=r(O);st(T);var C=o(T,2),U=r(C);ie(U,{class:"h-4 w-4"}),a(C),a(O),lt(O,x=>dt?.(x)),a(A),F(()=>it(T,l(u).id)),d(p,A)};D(Yt,p=>{t.data.isLoggedIn&&l(n)!==l(u).id&&p(Jt)})}a($),F(()=>{it(h,l(u).id),it(y,l(u).completed)}),d(j,$)},$$slots:{default:!0}})},$$slots:{default:!0}})}),a(c),d(e,c)};D($t,e=>{l(m).length===0?e(Ht):e(qt,!1)})}var wt=o($t,2),Tt=r(wt),Bt=o(r(Tt));a(Tt),a(wt),a(et),F((e,c)=>{kt(N,"href",e),kt(Bt,"href",c)},[()=>It("/admin"),()=>It("/admin")]),d(s,X),re()}te(["click"]);export{Je as component};
