{"version":3,"file":"_server.ts-BOESmVj7.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/user/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { authProvider } from \"../../../../chunks/index4.js\";\nconst PATCH = async ({ request, locals }) => {\n  try {\n    const auth = locals.auth;\n    if (!auth || auth.type !== \"session\") {\n      return json(\n        {\n          success: false,\n          error: \"Unauthorized\",\n          message: \"Session authentication required\"\n        },\n        { status: 401 }\n      );\n    }\n    const body = await request.json();\n    if (body.name === void 0) {\n      return json(\n        {\n          success: false,\n          error: \"Missing required field\",\n          message: \"name is required\"\n        },\n        { status: 400 }\n      );\n    }\n    await authProvider.changeUserName(auth.user.id, body.name);\n    return json({\n      success: true,\n      message: \"User updated successfully\"\n    });\n  } catch (error) {\n    console.error(\"Failed to update user:\", error);\n    return json(\n      {\n        success: false,\n        error: \"Failed to update user\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      },\n      { status: 500 }\n    );\n  }\n};\nexport {\n  PATCH\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAEK,MAAC,KAAK,GAAG,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK;AAC7C,EAAE,IAAI;AACN,IAAI,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI;AAC5B,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AAC1C,MAAM,OAAO,IAAI;AACjB,QAAQ;AACR,UAAU,OAAO,EAAE,KAAK;AACxB,UAAU,KAAK,EAAE,cAAc;AAC/B,UAAU,OAAO,EAAE;AACnB,SAAS;AACT,QAAQ,EAAE,MAAM,EAAE,GAAG;AACrB,OAAO;AACP,IAAI;AACJ,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACrC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE;AAC9B,MAAM,OAAO,IAAI;AACjB,QAAQ;AACR,UAAU,OAAO,EAAE,KAAK;AACxB,UAAU,KAAK,EAAE,wBAAwB;AACzC,UAAU,OAAO,EAAE;AACnB,SAAS;AACT,QAAQ,EAAE,MAAM,EAAE,GAAG;AACrB,OAAO;AACP,IAAI;AACJ,IAAI,MAAM,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC;AAC9D,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,OAAO,EAAE;AACf,KAAK,CAAC;AACN,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC;AAClD,IAAI,OAAO,IAAI;AACf,MAAM;AACN,QAAQ,OAAO,EAAE,KAAK;AACtB,QAAQ,KAAK,EAAE,uBAAuB;AACtC,QAAQ,OAAO,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG;AAC1D,OAAO;AACP,MAAM,EAAE,MAAM,EAAE,GAAG;AACnB,KAAK;AACL,EAAE;AACF;;;;"}