{"version":3,"file":"aphex.config-m9M2q4ce.js","sources":["../../../.svelte-kit/adapter-node/chunks/aphex.config.js"],"sourcesContent":["import \"@sveltejs/kit\";\nimport \"./storage.js\";\nimport \"sharp\";\nimport { s as schemaTypes } from \"./index6.js\";\nimport { authProvider } from \"./index4.js\";\nimport { b as db } from \"./index3.js\";\nimport { e as email } from \"./instance2.js\";\nfunction createCMSConfig(config) {\n  return {\n    // Start with the user's config and apply defaults for missing properties\n    ...config,\n    storage: config.storage ?? null,\n    // Default to null if not provided\n    customization: {\n      branding: {\n        title: \"Aphex CMS\",\n        ...config.customization?.branding\n      },\n      ...config.customization\n    },\n    plugins: config.plugins ?? []\n  };\n}\nfunction createLazyGraphQLPlugin(options = {}) {\n  return {\n    name: \"@aphexcms/graphql-plugin\",\n    version: \"0.1.0\",\n    config: options,\n    async install(cms) {\n      const { createGraphQLPlugin } = await import(\"@aphexcms/graphql-plugin\");\n      const actualPlugin = createGraphQLPlugin(options);\n      if (actualPlugin.install) {\n        await actualPlugin.install(cms);\n      }\n    }\n  };\n}\nconst graphqlPlugin = createLazyGraphQLPlugin({\n  endpoint: \"/api/graphql\",\n  enableGraphiQL: true,\n  defaultPerspective: \"draft\"\n});\nconst cmsConfig = createCMSConfig({\n  schemaTypes,\n  // Provide the shared database and storage adapter instances directly.\n  // These are created once in their respective /lib/server/.. files.\n  database: db,\n  // storage: storageAdapter, <-- defaults to local if not added. - to enable setup storageAdapter in ./src/lib/server/storage\n  auth: {\n    provider: authProvider,\n    loginUrl: \"/login\"\n    // Redirect here when unauthenticated\n  },\n  // GraphQL plugin with lazy loading - bundle stays small via dynamic import in install()\n  plugins: [graphqlPlugin],\n  customization: {\n    branding: {\n      title: \"Aphex - Base Template\"\n    }\n  },\n  email\n});\nexport {\n  cmsConfig as c\n};\n"],"names":[],"mappings":";;;;;;;;AAOA,SAAS,eAAe,CAAC,MAAM,EAAE;AACjC,EAAE,OAAO;AACT;AACA,IAAI,GAAG,MAAM;AACb,IAAI,OAAO,EAAE,MAAM,CAAC,OAAO,IAAI,IAAI;AACnC;AACA,IAAI,aAAa,EAAE;AACnB,MAAM,QAAQ,EAAE;AAChB,QAAQ,KAAK,EAAE,WAAW;AAC1B,QAAQ,GAAG,MAAM,CAAC,aAAa,EAAE;AACjC,OAAO;AACP,MAAM,GAAG,MAAM,CAAC;AAChB,KAAK;AACL,IAAI,OAAO,EAAE,MAAM,CAAC,OAAO,IAAI;AAC/B,GAAG;AACH;AACA,SAAS,uBAAuB,CAAC,OAAO,GAAG,EAAE,EAAE;AAC/C,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,0BAA0B;AACpC,IAAI,OAAO,EAAE,OAAO;AACpB,IAAI,MAAM,EAAE,OAAO;AACnB,IAAI,MAAM,OAAO,CAAC,GAAG,EAAE;AACvB,MAAM,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,OAAO,0BAA0B,CAAC;AAC9E,MAAM,MAAM,YAAY,GAAG,mBAAmB,CAAC,OAAO,CAAC;AACvD,MAAM,IAAI,YAAY,CAAC,OAAO,EAAE;AAChC,QAAQ,MAAM,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACvC,MAAM;AACN,IAAI;AACJ,GAAG;AACH;AACA,MAAM,aAAa,GAAG,uBAAuB,CAAC;AAC9C,EAAE,QAAQ,EAAE,cAAc;AAC1B,EAAE,cAAc,EAAE,IAAI;AACtB,EAAE,kBAAkB,EAAE;AACtB,CAAC,CAAC;AACG,MAAC,SAAS,GAAG,eAAe,CAAC;AAClC,EAAE,WAAW;AACb;AACA;AACA,EAAE,QAAQ,EAAE,EAAE;AACd;AACA,EAAE,IAAI,EAAE;AACR,IAAI,QAAQ,EAAE,YAAY;AAC1B,IAAI,QAAQ,EAAE;AACd;AACA,GAAG;AACH;AACA,EAAE,OAAO,EAAE,CAAC,aAAa,CAAC;AAC1B,EAAE,aAAa,EAAE;AACjB,IAAI,QAAQ,EAAE;AACd,MAAM,KAAK,EAAE;AACb;AACA,GAAG;AACH,EAAE;AACF,CAAC;;;;"}