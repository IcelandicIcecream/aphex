{"version":3,"file":"auth-helpers-D0NRVV-P.js","sources":["../../../.svelte-kit/adapter-node/chunks/auth-helpers.js"],"sourcesContent":["function authToContext(auth) {\n  if (!auth) {\n    throw new Error(\"Authentication required\");\n  }\n  if (auth.type === \"session\") {\n    return {\n      organizationId: auth.organizationId,\n      user: auth.user,\n      auth\n      // Preserve full auth for custom permission logic\n    };\n  }\n  if (auth.type === \"api_key\") {\n    return {\n      organizationId: auth.organizationId,\n      user: {\n        id: `apikey:${auth.keyId}`,\n        email: `apikey-${auth.name}@system`,\n        name: auth.name,\n        // Map API key permissions to user roles for permission checking\n        role: auth.permissions.includes(\"write\") ? \"editor\" : \"viewer\"\n      },\n      auth\n      // Preserve full auth for custom permission logic\n    };\n  }\n  throw new Error(\"Unknown auth type\");\n}\nexport {\n  authToContext as a\n};\n"],"names":[],"mappings":"AAAA,SAAS,aAAa,CAAC,IAAI,EAAE;AAC7B,EAAE,IAAI,CAAC,IAAI,EAAE;AACb,IAAI,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC;AAC9C,EAAE;AACF,EAAE,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AAC/B,IAAI,OAAO;AACX,MAAM,cAAc,EAAE,IAAI,CAAC,cAAc;AACzC,MAAM,IAAI,EAAE,IAAI,CAAC,IAAI;AACrB,MAAM;AACN;AACA,KAAK;AACL,EAAE;AACF,EAAE,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AAC/B,IAAI,OAAO;AACX,MAAM,cAAc,EAAE,IAAI,CAAC,cAAc;AACzC,MAAM,IAAI,EAAE;AACZ,QAAQ,EAAE,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AAClC,QAAQ,KAAK,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;AAC3C,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;AACvB;AACA,QAAQ,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,QAAQ,GAAG;AAC9D,OAAO;AACP,MAAM;AACN;AACA,KAAK;AACL,EAAE;AACF,EAAE,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC;AACtC;;;;"}